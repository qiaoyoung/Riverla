
#import <Foundation/Foundation.h>

NSString *StringFromLinguaFrancaData(Byte *data);


//: tips_push_content
Byte kStr_memberValue[] = {52, 17, 67, 10, 74, 87, 211, 67, 58, 13, 183, 172, 179, 182, 162, 179, 184, 182, 171, 162, 166, 178, 177, 183, 168, 177, 183, 120};


//: message_send_album
Byte kStr_shouldMakeData[] = {7, 18, 39, 5, 242, 148, 140, 154, 154, 136, 142, 140, 134, 154, 140, 149, 139, 134, 136, 147, 137, 156, 148, 136};


//: common_bg
Byte kStr_keyKitData[] = {70, 9, 26, 5, 142, 125, 137, 135, 135, 137, 136, 121, 124, 129, 157};


//: upload_picture
Byte kStr_barImageValue[] = {93, 14, 40, 9, 126, 193, 254, 170, 187, 157, 152, 148, 151, 137, 140, 135, 152, 145, 139, 156, 157, 154, 141, 248};


//: back_arrow_bl
Byte kStr_contentInfoName[] = {61, 13, 80, 8, 92, 215, 81, 7, 178, 177, 179, 187, 175, 177, 194, 194, 191, 199, 175, 178, 188, 158};


//: ic_album
Byte kStr_normalVideoData[] = {8, 8, 56, 14, 71, 8, 5, 66, 194, 77, 243, 167, 208, 175, 161, 155, 151, 153, 164, 154, 173, 165, 197};


//: ic_camera
Byte kStr_partChildTitle[] = {54, 9, 48, 12, 247, 150, 100, 43, 158, 204, 158, 167, 153, 147, 143, 147, 145, 157, 149, 162, 145, 160};


//: %@\n%@\n%@\n%@
Byte kStr_screenData[] = {79, 11, 39, 12, 13, 73, 148, 248, 193, 95, 232, 1, 76, 103, 49, 76, 103, 49, 76, 103, 49, 76, 103, 205};


//: contact_list_activity_most
Byte kStr_stopText[] = {56, 26, 9, 4, 108, 120, 119, 125, 106, 108, 125, 104, 117, 114, 124, 125, 104, 106, 108, 125, 114, 127, 114, 125, 130, 104, 118, 120, 124, 125, 201};


//: picture
Byte kStr_checkFileName[] = {47, 7, 82, 11, 77, 97, 195, 16, 35, 136, 215, 194, 187, 181, 198, 199, 196, 183, 130};


//: tips_push_content_1
Byte kStr_successNameText[] = {85, 19, 89, 13, 75, 94, 237, 59, 242, 131, 88, 103, 15, 205, 194, 201, 204, 184, 201, 206, 204, 193, 184, 188, 200, 199, 205, 190, 199, 205, 184, 138, 144};


//: group_info_activity_update_failed
Byte kStr_bubbleDoingData[] = {48, 33, 72, 10, 20, 77, 247, 229, 234, 176, 175, 186, 183, 189, 184, 167, 177, 182, 174, 183, 167, 169, 171, 188, 177, 190, 177, 188, 193, 167, 189, 184, 172, 169, 188, 173, 167, 174, 169, 177, 180, 173, 172, 24};


//: content
Byte kStr_enableShowMyValue[] = {81, 7, 28, 10, 78, 212, 168, 143, 66, 47, 127, 139, 138, 144, 129, 138, 144, 34};


//: #CCECFC
Byte kStr_partText[] = {13, 7, 66, 10, 245, 51, 154, 162, 182, 75, 101, 133, 133, 135, 133, 136, 133, 165};


//: B391FF
Byte kStr_willShowText[] = {1, 6, 77, 14, 222, 249, 123, 37, 165, 180, 17, 70, 38, 162, 143, 128, 134, 126, 147, 147, 65};


//: jpg
Byte kStr_securityData[] = {78, 3, 52, 12, 65, 174, 255, 77, 132, 208, 114, 38, 158, 164, 155, 84};


//: /friend/add
Byte kStr_frameName[] = {69, 11, 32, 5, 126, 79, 134, 146, 137, 133, 142, 132, 79, 129, 132, 132, 125};


//: tips_push
Byte kStr_replacementData[] = {98, 9, 30, 6, 128, 136, 146, 135, 142, 145, 125, 142, 147, 145, 134, 204};


//: #8A8E98
Byte kStr_tingValue[] = {69, 7, 9, 6, 150, 136, 44, 65, 74, 65, 78, 66, 65, 118};


//: tips_push_content_3
Byte kStr_colorModelData[] = {40, 19, 20, 6, 111, 58, 136, 125, 132, 135, 115, 132, 137, 135, 124, 115, 119, 131, 130, 136, 121, 130, 136, 115, 71, 252};


//: code
Byte kStr_colorKitValue[] = {15, 4, 21, 8, 96, 169, 190, 2, 120, 132, 121, 122, 138};


//: #2B2F36
Byte kStr_fileText[] = {27, 7, 11, 13, 230, 254, 92, 127, 150, 204, 19, 162, 170, 46, 61, 77, 61, 81, 62, 65, 148};


//: #F7D2F3
Byte kStr_screenValue[] = {26, 7, 49, 14, 176, 145, 35, 116, 169, 208, 176, 246, 220, 62, 84, 119, 104, 117, 99, 119, 100, 101};


//: tips_push_content_2
Byte kStr_replyKeyMaxData[] = {34, 19, 31, 9, 72, 250, 56, 234, 5, 147, 136, 143, 146, 126, 143, 148, 146, 135, 126, 130, 142, 141, 147, 132, 141, 147, 126, 81, 153};


//: #ffffff
Byte kStr_languageWithValue[] = {83, 7, 40, 8, 232, 47, 58, 49, 75, 142, 142, 142, 142, 142, 142, 60};


//: feedback_activity_submit
Byte kStr_nameLimitData[] = {95, 24, 34, 6, 220, 223, 136, 135, 135, 134, 132, 131, 133, 141, 129, 131, 133, 150, 139, 152, 139, 150, 155, 129, 149, 151, 132, 143, 139, 150, 119};


//: #000000
Byte kStr_kitWithData[] = {35, 7, 66, 10, 129, 194, 2, 150, 169, 141, 101, 114, 114, 114, 114, 114, 114, 119};


//: message_send_camera
Byte kStr_displayText[] = {43, 19, 62, 10, 159, 16, 58, 27, 146, 106, 171, 163, 177, 177, 159, 165, 163, 157, 177, 163, 172, 162, 157, 161, 159, 171, 163, 176, 159, 228};

// __DEBUG__
// __CLOSE_PRINT__
//
//  MessageViewController.m
//  Riverla
//
//  Created by mac on 2025/4/1.
//  Copyright © 2025 Riverla. All rights reserved.
//

// __M_A_C_R_O__
//: #import "DisCorveyPublishViewController.h"
#import "MessageViewController.h"
//: #import "TZTestCell.h"
#import "TeamViewCell.h"
//: #import "TZImagePickerController.h"
#import "TZImagePickerController.h"
//: #import "FUBeautyViewController.h"
#import "ChangeViewController.h"
//: #import "FUBeautyImageRenderViewController.h"
#import "MLinkViewController.h"
//: #import "FUImageRenderViewModel.h"
#import "ClickModel.h"
//: #import "NTESFileLocationHelper.h"
#import "TrademarkByScaleHelper.h"
//: #import "UIImage+FU.h"
#import "UIImage+FU.h"

//: @interface DisCorveyPublishViewController ()<UICollectionViewDataSource,UICollectionViewDelegate,TZImagePickerControllerDelegate>
@interface MessageViewController ()<UICollectionViewDataSource,UICollectionViewDelegate,TZImagePickerControllerDelegate>

//: @property (nonatomic, strong) UICollectionView *collectionView;
@property (nonatomic, strong) UICollectionView *collectionView;
//: @property (nonatomic, strong) NSMutableArray *selectedPhotos;
@property (nonatomic, strong) NSMutableArray *selectedPhotos;
//: @property (nonatomic, strong) NSMutableArray *selectedAssets;
@property (nonatomic, strong) NSMutableArray *selectedAssets;

//: @property (nonatomic, strong) NSMutableArray *urlList;
@property (nonatomic, strong) NSMutableArray *urlList;

//: @property (nonatomic,strong) UIButton *btnAlbum;
@property (nonatomic,strong) UIButton *btnAlbum;
//: @property (nonatomic,strong) UIButton *btnCamera;
@property (nonatomic,strong) UIButton *btnCamera;
//: @property (nonatomic,strong) UIButton *btnSubmit;
@property (nonatomic,strong) UIButton *btnSubmit;

//: @property (nonatomic,strong) UIView *tipview;
@property (nonatomic,strong) UIView *tipview;

//: @end
@end

//: @implementation DisCorveyPublishViewController
@implementation MessageViewController

//: - (void)viewWillAppear:(BOOL)animated{
- (void)viewWillAppear:(BOOL)animated{
    //: [super viewWillAppear:animated];
    [super viewWillAppear:animated];
    //: self.navigationController.navigationBarHidden = YES;
    self.navigationController.navigationBarHidden = YES;
}

//: - (void)viewWillDisappear:(BOOL)animated{
- (void)viewWillDisappear:(BOOL)animated{
    //: [super viewWillDisappear:animated];
    [super viewWillDisappear:animated];
    //: self.navigationController.navigationBarHidden = NO;
    self.navigationController.navigationBarHidden = NO;
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: self.view.backgroundColor = [UIColor whiteColor];
    self.view.backgroundColor = [UIColor whiteColor];
    //: UIImageView *bg = [[UIImageView alloc]initWithFrame:self.view.bounds];
    UIImageView *bg = [[UIImageView alloc]initWithFrame:self.view.bounds];
    //: bg.image = [UIImage imageNamed:@"common_bg"];
    bg.image = [UIImage imageNamed:StringFromLinguaFrancaData(kStr_keyKitData)];
    //: [self.view addSubview:bg];
    [self.view addSubview:bg];

    //: UIButton *closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    //: closeBtn.frame = CGRectMake(15, 4+[UIDevice vg_statusBarHeight], 32, 32);
    closeBtn.frame = CGRectMake(15, 4+[UIDevice table], 32, 32);
    //: closeBtn.backgroundColor = [UIColor clearColor];
    closeBtn.backgroundColor = [UIColor clearColor];
    //: [closeBtn setImage:[UIImage imageNamed:@"back_arrow_bl"] forState:(UIControlStateNormal)];
    [closeBtn setImage:[UIImage imageNamed:StringFromLinguaFrancaData(kStr_contentInfoName)] forState:(UIControlStateNormal)];
    //: [closeBtn addTarget:self action:@selector(backAction) forControlEvents:UIControlEventTouchUpInside];
    [closeBtn addTarget:self action:@selector(messageView) forControlEvents:UIControlEventTouchUpInside];
    //: [self.view addSubview:closeBtn];
    [self.view addSubview:closeBtn];

//    UIButton *infoBtn = [UIButton buttonWithType:UIButtonTypeCustom];
//    infoBtn.frame = CGRectMake(SCREEN_WIDTH-15-32, 4+SCREEN_STATUS_HEIGHT, 32, 32);
//    infoBtn.backgroundColor = [UIColor clearColor];
//    [infoBtn setImage:[UIImage imageNamed:@"ic_info"] forState:(UIControlStateNormal)];
//    [infoBtn addTarget:self action:@selector(infoAction) forControlEvents:UIControlEventTouchUpInside];
//    [self.view addSubview:infoBtn];

    //: _selectedPhotos = [NSMutableArray array];
    _selectedPhotos = [NSMutableArray array];
    //: _selectedAssets = [NSMutableArray array];
    _selectedAssets = [NSMutableArray array];
    //: _urlList = [NSMutableArray array];
    _urlList = [NSMutableArray array];
    //: [self configCollectionView];
    [self displayRange];

     //: [self.view addSubview:self.tipview];
     [self.view addSubview:self.tipview];
    //: self.tipview.frame = CGRectMake(0, (44.0f + [UIDevice vg_statusBarHeight])+300, [[UIScreen mainScreen] bounds].size.width, 150);
    self.tipview.frame = CGRectMake(0, (44.0f + [UIDevice table])+300, [[UIScreen mainScreen] bounds].size.width, 150);

    //: [self.view addSubview:self.btnSubmit];
    [self.view addSubview:self.btnSubmit];
    //: [self.view addSubview:self.btnCamera];
    [self.view addSubview:self.btnCamera];
    //: [self.view addSubview:self.btnAlbum];
    [self.view addSubview:self.btnAlbum];
}

//: - (void)configCollectionView {
- (void)displayRange {
    // 设置 UICollectionView 的布局
    //: CGFloat space = 15;
    CGFloat space = 15;
    //: CGFloat width = ([[UIScreen mainScreen] bounds].size.width-4*space)/3;
    CGFloat width = ([[UIScreen mainScreen] bounds].size.width-4*space)/3;
    //: UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init];
    UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init];
    //: layout.itemSize = CGSizeMake(width, width); 
    layout.itemSize = CGSizeMake(width, width); // 每个 item 的大小
    //: layout.minimumInteritemSpacing = space; 
    layout.minimumInteritemSpacing = space; // item 之间的水平间距
    //: layout.minimumLineSpacing = space; 
    layout.minimumLineSpacing = space; // item 之间的垂直间距
    //: layout.sectionInset = UIEdgeInsetsMake(0, 0, 0, 0); 
    layout.sectionInset = UIEdgeInsetsMake(0, 0, 0, 0); // section 内的边距

    // 初始化 UICollectionView 并设置布局
    //: self.collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(15, (44.0f + [UIDevice vg_statusBarHeight])+40, [[UIScreen mainScreen] bounds].size.width-30, 200) collectionViewLayout:layout];
    self.collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(15, (44.0f + [UIDevice table])+40, [[UIScreen mainScreen] bounds].size.width-30, 200) collectionViewLayout:layout];
    //: self.collectionView.delegate = self; 
    self.collectionView.delegate = self; // 设置代理
    //: self.collectionView.dataSource = self; 
    self.collectionView.dataSource = self; // 设置数据源
    //: self.collectionView.showsVerticalScrollIndicator = NO;
    self.collectionView.showsVerticalScrollIndicator = NO;
    //: self.collectionView.showsHorizontalScrollIndicator = NO;
    self.collectionView.showsHorizontalScrollIndicator = NO;
    //: self.collectionView.backgroundColor = [UIColor clearColor];
    self.collectionView.backgroundColor = [UIColor clearColor];
    //: [self.view addSubview:self.collectionView];
    [self.view addSubview:self.collectionView];
    //: [_collectionView registerClass:[TZTestCell class] forCellWithReuseIdentifier:@"TZTestCell"];
    [_collectionView registerClass:[TeamViewCell class] forCellWithReuseIdentifier:@"TeamViewCell"];
}

//: #pragma mark UICollectionView
#pragma mark UICollectionView
//: - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

    //: return _selectedPhotos.count;
    return _selectedPhotos.count;
}

//: - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    //: TZTestCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"TZTestCell" forIndexPath:indexPath];
    TeamViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"TeamViewCell" forIndexPath:indexPath];
    //: cell.videoImageView.hidden = YES;
    cell.videoImageView.hidden = YES;
    //: cell.layer.cornerRadius = 8;
    cell.layer.cornerRadius = 8;
    //: cell.layer.masksToBounds = YES;
    cell.layer.masksToBounds = YES;

        //: cell.imageView.image = _selectedPhotos[indexPath.item];
        cell.imageView.image = _selectedPhotos[indexPath.item];
        //: cell.deleteBtn.hidden = NO;
        cell.deleteBtn.hidden = NO;


    //: cell.deleteBtn.tag = indexPath.item;
    cell.deleteBtn.tag = indexPath.item;
    //: [cell.deleteBtn addTarget:self action:@selector(deleteBtnClik:) forControlEvents:UIControlEventTouchUpInside];
    [cell.deleteBtn addTarget:self action:@selector(upEnable:) forControlEvents:UIControlEventTouchUpInside];

    //: return cell;
    return cell;
}

//: - (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
//     // preview photos or video / 预览照片或者视频
//        PHAsset *asset = _selectedAssets[indexPath.item];
//        TZImagePickerController *imagePickerVc = [[TZImagePickerController alloc] initWithSelectedAssets:_selectedAssets selectedPhotos:_selectedPhotos index:indexPath.item];
//        imagePickerVc.maxImagesCount = 5;
//        imagePickerVc.allowPickingGif = NO;
//        imagePickerVc.autoSelectCurrentWhenDone = NO;
//        imagePickerVc.allowPickingOriginalPhoto = NO;
//        imagePickerVc.allowPickingMultipleVideo = NO;
//        imagePickerVc.showSelectedIndex = YES;
//        imagePickerVc.isSelectOriginalPhoto = _isSelectOriginalPhoto;
//        imagePickerVc.modalPresentationStyle = UIModalPresentationFullScreen;
//        [imagePickerVc setDidFinishPickingPhotosHandle:^(NSArray<UIImage *> *photos, NSArray *assets, BOOL isSelectOriginalPhoto) {
//            self->_selectedPhotos = [NSMutableArray arrayWithArray:photos];
//            self->_selectedAssets = [NSMutableArray arrayWithArray:assets];
//            self->_isSelectOriginalPhoto = isSelectOriginalPhoto;
//            [self->_collectionView reloadData];
//            self->_collectionView.contentSize = CGSizeMake(0, ((self->_selectedPhotos.count + 2) / 3 ) * (self->_margin + self->_itemWH));
//        }];
//        [self presentViewController:imagePickerVc animated:YES completion:nil];
//    
}
//: #pragma mark - Click Event
#pragma mark - Click Event
//: - (void)deleteBtnClik:(UIButton *)sender {
- (void)upEnable:(UIButton *)sender {
    //: if ([self collectionView:self.collectionView numberOfItemsInSection:0] <= _selectedPhotos.count) {
    if ([self collectionView:self.collectionView numberOfItemsInSection:0] <= _selectedPhotos.count) {
        //: [self.selectedPhotos removeObjectAtIndex:sender.tag];
        [self.selectedPhotos removeObjectAtIndex:sender.tag];
        //: [self.urlList removeObjectAtIndex:sender.tag];
        [self.urlList removeObjectAtIndex:sender.tag];
        //: [self.collectionView reloadData];
        [self.collectionView reloadData];
        //: return;
        return;
    }

    //: [_selectedPhotos removeObjectAtIndex:sender.tag];
    [_selectedPhotos removeObjectAtIndex:sender.tag];
    //: [_urlList removeObjectAtIndex:sender.tag];
    [_urlList removeObjectAtIndex:sender.tag];
    //: [_collectionView performBatchUpdates:^{
    [_collectionView performBatchUpdates:^{
        //: NSIndexPath *indexPath = [NSIndexPath indexPathForItem:sender.tag inSection:0];
        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:sender.tag inSection:0];
        //: [self->_collectionView deleteItemsAtIndexPaths:@[indexPath]];
        [self->_collectionView deleteItemsAtIndexPaths:@[indexPath]];
    //: } completion:^(BOOL finished) {
    } completion:^(BOOL finished) {
        //: [self->_collectionView reloadData];
        [self->_collectionView reloadData];
    //: }];
    }];
}

//: - (void)backAction{
- (void)messageView{
    //: [self.navigationController popViewControllerAnimated:NO];
    [self.navigationController popViewControllerAnimated:NO];
}

//- (void)infoAction{
//    self.tipview.hidden = !self.tipview.hidden;
//}

//: - (void)onTouchSubmitButton
- (void)greenImage
{
//    if (self.urlList.count<0) {
//        //please_choose
//        return;
//    }
    //: NSString *pic = [self.urlList componentsJoinedByString:@","];
    NSString *pic = [self.urlList componentsJoinedByString:@","];
    //: NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    //: [dict setObject:pic forKey:@"picture"];
    [dict setObject:pic forKey:StringFromLinguaFrancaData(kStr_checkFileName)];
    //: [dict setObject:@"" forKey:@"content"];
    [dict setObject:@"" forKey:StringFromLinguaFrancaData(kStr_enableShowMyValue)];
    @
     //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
     autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
    //: [ZCHttpManager postWithUrl:[NSString stringWithFormat:@"/friend/add"] params:dict isShow:YES success:^(id responseObject) {
    [InfoManager should:[NSString stringWithFormat:StringFromLinguaFrancaData(kStr_frameName)] after:dict dataDisable:YES displayDatePress:^(id responseObject) {
        @
         //: try{} @finally{} __typeof__(self) self = __weak_self__;
         try{} @finally{} __typeof__(self) self = __weak_self__;
        //: NSDictionary *resultDict = (NSDictionary *)responseObject;
        NSDictionary *resultDict = (NSDictionary *)responseObject;
        //: NSString *code = [resultDict newStringValueForKey:@"code"];
        NSString *code = [resultDict speedy:StringFromLinguaFrancaData(kStr_colorKitValue)];
        //: if (code.integerValue == 0) {
        if (code.integerValue == 0) {
            //: [self.navigationController popViewControllerAnimated:NO];
            [self.navigationController popViewControllerAnimated:NO];
        }
    //: } failed:^(id responseObject, NSError *error) {
    } textMessage:^(id responseObject, NSError *error) {
        //: NSLog(@"error:%@",error);
    //: }];
    }];


}

//: - (void)uploadThepush
- (void)session
{
    //: NSString *pic = [self.urlList componentsJoinedByString:@","];
    NSString *pic = [self.urlList componentsJoinedByString:@","];
    //: NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    //: [dict setObject:pic forKey:@"picture"];
    [dict setObject:pic forKey:StringFromLinguaFrancaData(kStr_checkFileName)];
    //: [dict setObject:@"" forKey:@"content"];
    [dict setObject:@"" forKey:StringFromLinguaFrancaData(kStr_enableShowMyValue)];
    @
     //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
     autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
    //: [ZCHttpManager postWithUrl:[NSString stringWithFormat:@"/friend/add"] params:dict isShow:YES success:^(id responseObject) {
    [InfoManager should:[NSString stringWithFormat:StringFromLinguaFrancaData(kStr_frameName)] after:dict dataDisable:YES displayDatePress:^(id responseObject) {
        @
         //: try{} @finally{} __typeof__(self) self = __weak_self__;
         try{} @finally{} __typeof__(self) self = __weak_self__;
        //: NSDictionary *resultDict = (NSDictionary *)responseObject;
        NSDictionary *resultDict = (NSDictionary *)responseObject;
        //: NSString *code = [resultDict newStringValueForKey:@"code"];
        NSString *code = [resultDict speedy:StringFromLinguaFrancaData(kStr_colorKitValue)];
        //: if (code.integerValue == 0) {
        if (code.integerValue == 0) {
            //: [self.navigationController popViewControllerAnimated:NO];
            [self.navigationController popViewControllerAnimated:NO];
        }
    //: } failed:^(id responseObject, NSError *error) {
    } textMessage:^(id responseObject, NSError *error) {
        //: NSLog(@"error:%@",error);
    //: }];
    }];
}

//: - (void)onTouchAlbumButton
- (void)resultView
{
    //: if (self.selectedPhotos.count>=3) {
    if (self.selectedPhotos.count>=3) {
        //: [self.view makeToast:[NSString stringWithFormat:@"%@ %@ 3",[FFFLanguageManager getTextWithKey:@"upload_picture"],[FFFLanguageManager getTextWithKey:@"contact_list_activity_most"]]
        [self.view makeToast:[NSString stringWithFormat:@"%@ %@ 3",[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_barImageValue)],[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_stopText)]]
                    //: duration:2
                    duration:2
                    //: position:CSToastPositionCenter];
                    position:CSToastPositionCenter];
        //: return;
        return;
    }
    //: [self pushTZImagePickerController];
    [self providerController];

}

//: - (void)onTouchCameraButton
- (void)maxOption
{
    //: if (self.selectedPhotos.count>=3) {
    if (self.selectedPhotos.count>=3) {
        //: [self.view makeToast:[NSString stringWithFormat:@"%@ %@ 3",[FFFLanguageManager getTextWithKey:@"upload_picture"],[FFFLanguageManager getTextWithKey:@"contact_list_activity_most"]]
        [self.view makeToast:[NSString stringWithFormat:@"%@ %@ 3",[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_barImageValue)],[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_stopText)]]
                    //: duration:2
                    duration:2
                    //: position:CSToastPositionCenter];
                    position:CSToastPositionCenter];
        //: return;
        return;
    }

    //: FURenderViewController *vc = [[FURenderViewController alloc] initWithViewModel:[[FUBeautyViewModel alloc] init]];
    PerspectiveNameViewController *vc = [[PerspectiveNameViewController alloc] initWithDuringTable:[[UserViewModel alloc] init]];
    //: vc.photoNum = self.selectedPhotos.count;
    vc.photoNum = self.selectedPhotos.count;
    //: [self.navigationController pushViewController:vc animated:YES];
    [self.navigationController pushViewController:vc animated:YES];
    //: vc.speiceBackBlock = ^(NSArray * _Nonnull imgArray) {
    vc.speiceBackBlock = ^(NSArray * _Nonnull imgArray) {
        //: [self uploadImage:imgArray];
        [self cuttingEdge:imgArray];

        //: dispatch_async(dispatch_get_main_queue(), ^{
        dispatch_async(dispatch_get_main_queue(), ^{
//            [self loadPicNum];
            //: [self.selectedPhotos addObjectsFromArray:imgArray];
            [self.selectedPhotos addObjectsFromArray:imgArray];
            //: [self.collectionView reloadData];
            [self.collectionView reloadData];
        //: });
        });

    //: };
    };
}

//: #pragma mark - TZImagePickerController
#pragma mark - TZImagePickerController
//: - (void)pushTZImagePickerController {
- (void)providerController {

    //: TZImagePickerController *imagePickerVc = [[TZImagePickerController alloc] initWithMaxImagesCount:1 columnNumber:3 delegate:self pushPhotoPickerVc:YES];
    TZImagePickerController *imagePickerVc = [[TZImagePickerController alloc] initWithMaxImagesCount:1 columnNumber:3 delegate:self pushPhotoPickerVc:YES];

//: #pragma mark - 五类个性化设置，这些参数都可以不传，此时会走默认设置
#pragma mark - 五类个性化设置，这些参数都可以不传，此时会走默认设置
    //: imagePickerVc.selectedAssets = _selectedAssets; 
    imagePickerVc.selectedAssets = _selectedAssets; // 目前已经选中的图片数组
    //: imagePickerVc.allowTakePicture = NO; 
    imagePickerVc.allowTakePicture = NO; // 在内部显示拍照按钮
    //: imagePickerVc.allowTakeVideo = NO; 
    imagePickerVc.allowTakeVideo = NO; // 在内部显示拍视频按
    //: [imagePickerVc setUiImagePickerControllerSettingBlock:^(UIImagePickerController *imagePickerController) {
    [imagePickerVc setUiImagePickerControllerSettingBlock:^(UIImagePickerController *imagePickerController) {
        //: imagePickerController.videoQuality = UIImagePickerControllerQualityTypeHigh;
        imagePickerController.videoQuality = UIImagePickerControllerQualityTypeHigh;
    //: }];
    }];

    //: imagePickerVc.iconThemeColor = [UIColor colorWithRed:31 / 255.0 green:185 / 255.0 blue:34 / 255.0 alpha:1.0];
    imagePickerVc.iconThemeColor = [UIColor colorWithRed:31 / 255.0 green:185 / 255.0 blue:34 / 255.0 alpha:1.0];
    //: imagePickerVc.showPhotoCannotSelectLayer = YES;
    imagePickerVc.showPhotoCannotSelectLayer = YES;
    //: imagePickerVc.cannotSelectLayerColor = [[UIColor whiteColor] colorWithAlphaComponent:0.8];
    imagePickerVc.cannotSelectLayerColor = [[UIColor whiteColor] colorWithAlphaComponent:0.8];
    //: imagePickerVc.processHintStr = @"...";
    imagePickerVc.processHintStr = @"...";
    // 3. 设置是否可以选择视频/图片/原图
    //: imagePickerVc.allowPickingVideo = NO;
    imagePickerVc.allowPickingVideo = NO;
    //: imagePickerVc.allowPickingImage = YES;
    imagePickerVc.allowPickingImage = YES;
    //: imagePickerVc.allowPickingOriginalPhoto = NO;
    imagePickerVc.allowPickingOriginalPhoto = NO;
    //: imagePickerVc.allowPickingGif = NO;
    imagePickerVc.allowPickingGif = NO;
    //: imagePickerVc.allowPickingMultipleVideo = NO;
    imagePickerVc.allowPickingMultipleVideo = NO;

    // 4. 照片排列按修改时间升序
    //: imagePickerVc.sortAscendingByModificationDate = YES;
    imagePickerVc.sortAscendingByModificationDate = YES;
    //: imagePickerVc.showSelectBtn = NO;
    imagePickerVc.showSelectBtn = NO;
    //: imagePickerVc.allowCrop = NO;
    imagePickerVc.allowCrop = NO;
    //: imagePickerVc.needCircleCrop = YES;
    imagePickerVc.needCircleCrop = YES;
    // 设置竖屏下的裁剪尺寸
    //: NSInteger left = 30;
    NSInteger left = 30;
    //: NSInteger widthHeight = [[UIScreen mainScreen] bounds].size.width - 2 * left;
    NSInteger widthHeight = [[UIScreen mainScreen] bounds].size.width - 2 * left;
    //: NSInteger top = ([[UIScreen mainScreen] bounds].size.height - widthHeight) / 2;
    NSInteger top = ([[UIScreen mainScreen] bounds].size.height - widthHeight) / 2;
    //: imagePickerVc.cropRect = CGRectMake(left, top, widthHeight, widthHeight);
    imagePickerVc.cropRect = CGRectMake(left, top, widthHeight, widthHeight);
    //: imagePickerVc.scaleAspectFillCrop = YES;
    imagePickerVc.scaleAspectFillCrop = YES;
    //: imagePickerVc.statusBarStyle = UIStatusBarStyleLightContent;
    imagePickerVc.statusBarStyle = UIStatusBarStyleLightContent;
    // 设置是否显示图片序号
    //: imagePickerVc.showSelectedIndex = YES;
    imagePickerVc.showSelectedIndex = YES;
    //: imagePickerVc.navigationBar.barStyle = UIBarStyleDefault;
    imagePickerVc.navigationBar.barStyle = UIBarStyleDefault;
    //: imagePickerVc.naviTitleColor = [UIColor blackColor];
    imagePickerVc.naviTitleColor = [UIColor blackColor];
    //: imagePickerVc.barItemTextColor = [UIColor blackColor];
    imagePickerVc.barItemTextColor = [UIColor blackColor];
//: #pragma mark - 到这里为止
#pragma mark - 到这里为止

    //: [imagePickerVc setDidFinishPickingPhotosHandle:^(NSArray<UIImage *> *photos, NSArray *assets, BOOL isSelectOriginalPhoto) {
    [imagePickerVc setDidFinishPickingPhotosHandle:^(NSArray<UIImage *> *photos, NSArray *assets, BOOL isSelectOriginalPhoto) {

        //: UIImage *image = [photos.firstObject fu_processedImage];
        UIImage *image = [photos.firstObject enable];
        //: FUImageRenderViewController *vc = [[FUImageRenderViewController alloc] initWithViewModel:[[FUImageRenderViewModel alloc] initWithImage:image]];
        LengthViewController *vc = [[LengthViewController alloc] initWithJumpstart:[[ClickModel alloc] initWithProvider:image]];
        //: [self.navigationController pushViewController:vc animated:YES];
        [self.navigationController pushViewController:vc animated:YES];
        @
         //: autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
         autoreleasepool{} __weak __typeof__(self) __weak_self__ = self;
        //: vc.speiceimgBackBlock = ^(NSArray *imgArray) {
        vc.speiceimgBackBlock = ^(NSArray *imgArray) {
            @
             //: try{} @finally{} __typeof__(self) self = __weak_self__;
             try{} @finally{} __typeof__(self) self = __weak_self__;
            //: [self uploadImage:imgArray];
            [self cuttingEdge:imgArray];

            //: dispatch_async(dispatch_get_main_queue(), ^{
            dispatch_async(dispatch_get_main_queue(), ^{
//                [self loadPicNum];
                //: [self.selectedPhotos addObjectsFromArray:imgArray];
                [self.selectedPhotos addObjectsFromArray:imgArray];
                //: [self.collectionView reloadData];
                [self.collectionView reloadData];
            //: });
            });
        //: };
        };



    //: }];
    }];

    //: imagePickerVc.modalPresentationStyle = UIModalPresentationFullScreen;
    imagePickerVc.modalPresentationStyle = UIModalPresentationFullScreen;
    //: [self presentViewController:imagePickerVc animated:YES completion:nil];
    [self presentViewController:imagePickerVc animated:YES completion:nil];
}

//: #pragma mark - Private
#pragma mark - Private
//: - (void)loadPicNum
- (void)pageSegment
{
    //: if (self.selectedPhotos.count>0) {
    if (self.selectedPhotos.count>0) {
        //: self.btnSubmit.alpha = 1;
        self.btnSubmit.alpha = 1;
        //: self.btnSubmit.userInteractionEnabled = YES;
        self.btnSubmit.userInteractionEnabled = YES;
    //: }else{
    }else{
        //: self.btnSubmit.alpha = 0.4;
        self.btnSubmit.alpha = 0.4;
        //: self.btnSubmit.userInteractionEnabled = NO;
        self.btnSubmit.userInteractionEnabled = NO;
    }
}


//: - (void)uploadImage:(NSArray *)imageArray
- (void)cuttingEdge:(NSArray *)imageArray
{

    //: for (UIImage *image in imageArray) {
    for (UIImage *image in imageArray) {
        //: NSString *fileName = [NTESFileLocationHelper genFilenameWithExt:@"jpg"];
        NSString *fileName = [TrademarkByScaleHelper view:StringFromLinguaFrancaData(kStr_securityData)];
        //: NSString *filePath = [[NTESFileLocationHelper getAppDocumentPath] stringByAppendingPathComponent:fileName];
        NSString *filePath = [[TrademarkByScaleHelper oldTing] stringByAppendingPathComponent:fileName];
        //: NSData *data = UIImageJPEGRepresentation(image, 0.7);
        NSData *data = UIImageJPEGRepresentation(image, 0.7);
        //: BOOL success = data && [data writeToFile:filePath atomically:YES];
        BOOL success = data && [data writeToFile:filePath atomically:YES];
        //: __weak typeof(self) wself = self;
        __weak typeof(self) wself = self;
        //: if (success) {
        if (success) {
            //: [SVProgressHUD show];
            [SVProgressHUD show];
            //: [[NIMSDK sharedSDK].resourceManager upload:filePath progress:nil completion:^(NSString * _Nullable urlString, NSError * _Nullable error) {
            [[NIMSDK sharedSDK].resourceManager upload:filePath progress:nil completion:^(NSString * _Nullable urlString, NSError * _Nullable error) {
                //: [SVProgressHUD dismiss];
                [SVProgressHUD dismiss];
                //: if (!error && wself) {
                if (!error && wself) {
                    //: NSLog(@"urlString：%@",urlString);
                    //: [_urlList addObject:urlString];
                    [_urlList addObject:urlString];
                    //: if (self.urlList.count>0) {
                    if (self.urlList.count>0) {
                        //: self.btnSubmit.alpha = 1;
                        self.btnSubmit.alpha = 1;
                        //: self.btnSubmit.userInteractionEnabled = YES;
                        self.btnSubmit.userInteractionEnabled = YES;
                    //: }else{
                    }else{
                        //: self.btnSubmit.alpha = 0.4;
                        self.btnSubmit.alpha = 0.4;
                        //: self.btnSubmit.userInteractionEnabled = NO;
                        self.btnSubmit.userInteractionEnabled = NO;
                    }
                }
            //: }];
            }];
        //: }else{
        }else{
            //: [self.view makeToast:[FFFLanguageManager getTextWithKey:@"group_info_activity_update_failed"]
            [self.view makeToast:[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_bubbleDoingData)]
                        //: duration:2
                        duration:2
                        //: position:CSToastPositionCenter];
                        position:CSToastPositionCenter];
        }
    }

//    [self uploadThepush];




}

//: #pragma mark - getset
#pragma mark - getset
//: - (UIButton *)btnAlbum
- (UIButton *)btnAlbum
{
    //: CGFloat width = ([[UIScreen mainScreen] bounds].size.width-45)/2;
    CGFloat width = ([[UIScreen mainScreen] bounds].size.width-45)/2;
    //: if(!_btnAlbum){
    if(!_btnAlbum){
        //: _btnAlbum = [UIButton buttonWithType:UIButtonTypeCustom];
        _btnAlbum = [UIButton buttonWithType:UIButtonTypeCustom];
        //: _btnAlbum.frame = CGRectMake(15, [[UIScreen mainScreen] bounds].size.height-270, width, 110);
        _btnAlbum.frame = CGRectMake(15, [[UIScreen mainScreen] bounds].size.height-270, width, 110);
        //: _btnAlbum.backgroundColor = [UIColor colorWithHexString:@"#CCECFC"];
        _btnAlbum.backgroundColor = [UIColor isView:StringFromLinguaFrancaData(kStr_partText)];
        //: _btnAlbum.layer.cornerRadius = 12;
        _btnAlbum.layer.cornerRadius = 12;
        //: [_btnAlbum addTarget:self action:@selector(onTouchAlbumButton) forControlEvents:UIControlEventTouchUpInside];
        [_btnAlbum addTarget:self action:@selector(resultView) forControlEvents:UIControlEventTouchUpInside];
        //: _btnAlbum.titleLabel.font = [UIFont systemFontOfSize:14];
        _btnAlbum.titleLabel.font = [UIFont systemFontOfSize:14];
        //: [_btnAlbum setTitleColor:[UIColor colorWithHexString:@"#000000"] forState:UIControlStateNormal];
        [_btnAlbum setTitleColor:[UIColor isView:StringFromLinguaFrancaData(kStr_kitWithData)] forState:UIControlStateNormal];
        //: [_btnAlbum setTitle:[FFFLanguageManager getTextWithKey:@"message_send_album"] forState:UIControlStateNormal];
        [_btnAlbum setTitle:[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_shouldMakeData)] forState:UIControlStateNormal];
        //: [_btnAlbum setImage:[UIImage imageNamed:@"ic_album"] forState:UIControlStateNormal];
        [_btnAlbum setImage:[UIImage imageNamed:StringFromLinguaFrancaData(kStr_normalVideoData)] forState:UIControlStateNormal];
        //: [_btnAlbum layoutButtonWithEdgeInsetsStyle:(MKButtonEdgeInsetsStyleTop) imageTitleSpace:10];
        [_btnAlbum barBackground:(MKButtonEdgeInsetsStyleTop) by:10];
        //: [self.view addSubview:_btnAlbum];
        [self.view addSubview:_btnAlbum];

    }
    //: return _btnAlbum;
    return _btnAlbum;
}

//: - (UIButton *)btnCamera
- (UIButton *)btnCamera
{
    //: CGFloat width = ([[UIScreen mainScreen] bounds].size.width-45)/2;
    CGFloat width = ([[UIScreen mainScreen] bounds].size.width-45)/2;
    //: if(!_btnCamera){
    if(!_btnCamera){
        //: _btnCamera = [UIButton buttonWithType:UIButtonTypeCustom];
        _btnCamera = [UIButton buttonWithType:UIButtonTypeCustom];
        //: _btnCamera.frame = CGRectMake(width+30, [[UIScreen mainScreen] bounds].size.height-270, width, 110);
        _btnCamera.frame = CGRectMake(width+30, [[UIScreen mainScreen] bounds].size.height-270, width, 110);
        //: _btnCamera.backgroundColor = [UIColor colorWithHexString:@"#F7D2F3"];
        _btnCamera.backgroundColor = [UIColor isView:StringFromLinguaFrancaData(kStr_screenValue)];
        //: _btnCamera.layer.cornerRadius = 12;
        _btnCamera.layer.cornerRadius = 12;
        //: [_btnCamera addTarget:self action:@selector(onTouchCameraButton) forControlEvents:UIControlEventTouchUpInside];
        [_btnCamera addTarget:self action:@selector(maxOption) forControlEvents:UIControlEventTouchUpInside];
        //: _btnCamera.titleLabel.font = [UIFont systemFontOfSize:14];
        _btnCamera.titleLabel.font = [UIFont systemFontOfSize:14];
        //: [_btnCamera setTitleColor:[UIColor colorWithHexString:@"#000000"] forState:UIControlStateNormal];
        [_btnCamera setTitleColor:[UIColor isView:StringFromLinguaFrancaData(kStr_kitWithData)] forState:UIControlStateNormal];
        //: [_btnCamera setTitle:[FFFLanguageManager getTextWithKey:@"message_send_camera"] forState:UIControlStateNormal];
        [_btnCamera setTitle:[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_displayText)] forState:UIControlStateNormal];
        //: [_btnCamera setImage:[UIImage imageNamed:@"ic_camera"] forState:UIControlStateNormal];
        [_btnCamera setImage:[UIImage imageNamed:StringFromLinguaFrancaData(kStr_partChildTitle)] forState:UIControlStateNormal];
        //: [_btnCamera layoutButtonWithEdgeInsetsStyle:(MKButtonEdgeInsetsStyleTop) imageTitleSpace:10];
        [_btnCamera barBackground:(MKButtonEdgeInsetsStyleTop) by:10];
        //: [self.view addSubview:_btnCamera];
        [self.view addSubview:_btnCamera];

    }
    //: return _btnCamera;
    return _btnCamera;
}
//: - (UIButton *)btnSubmit
- (UIButton *)btnSubmit
{
    //: if(!_btnSubmit){
    if(!_btnSubmit){
        //: _btnSubmit = [UIButton buttonWithType:UIButtonTypeCustom];
        _btnSubmit = [UIButton buttonWithType:UIButtonTypeCustom];
        //: _btnSubmit.frame = CGRectMake(15, [[UIScreen mainScreen] bounds].size.height-48-30, [[UIScreen mainScreen] bounds].size.width-30, 48);
        _btnSubmit.frame = CGRectMake(15, [[UIScreen mainScreen] bounds].size.height-48-30, [[UIScreen mainScreen] bounds].size.width-30, 48);
        //: _btnSubmit.backgroundColor = [UIColor colorWithHexString:@"B391FF"];
        _btnSubmit.backgroundColor = [UIColor isView:StringFromLinguaFrancaData(kStr_willShowText)];
        //: _btnSubmit.layer.cornerRadius = 12;
        _btnSubmit.layer.cornerRadius = 12;
        //: [_btnSubmit addTarget:self action:@selector(onTouchSubmitButton) forControlEvents:UIControlEventTouchUpInside];
        [_btnSubmit addTarget:self action:@selector(greenImage) forControlEvents:UIControlEventTouchUpInside];
        //: _btnSubmit.titleLabel.font = [UIFont systemFontOfSize:16];
        _btnSubmit.titleLabel.font = [UIFont systemFontOfSize:16];
        //: [_btnSubmit setTitleColor:[UIColor colorWithHexString:@"#ffffff"] forState:UIControlStateNormal];
        [_btnSubmit setTitleColor:[UIColor isView:StringFromLinguaFrancaData(kStr_languageWithValue)] forState:UIControlStateNormal];
        //: [_btnSubmit setTitle:[FFFLanguageManager getTextWithKey:@"feedback_activity_submit"] forState:UIControlStateNormal];
        [_btnSubmit setTitle:[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_nameLimitData)] forState:UIControlStateNormal];
        //: _btnSubmit.alpha = 0.4;
        _btnSubmit.alpha = 0.4;
        //: _btnSubmit.userInteractionEnabled = NO;
        _btnSubmit.userInteractionEnabled = NO;
        //: [self.view addSubview:_btnSubmit];
        [self.view addSubview:_btnSubmit];

    }
    //: return _btnSubmit;
    return _btnSubmit;
}

//: - (UIView *)tipview
- (UIView *)tipview
{
    //: if (!_tipview) {
    if (!_tipview) {
        //: _tipview = [[UIView alloc]init];
        _tipview = [[UIView alloc]init];

        //: UILabel *lab = [[UILabel alloc]initWithFrame:CGRectMake(15, 0, [[UIScreen mainScreen] bounds].size.width-30, 20)];
        UILabel *lab = [[UILabel alloc]initWithFrame:CGRectMake(15, 0, [[UIScreen mainScreen] bounds].size.width-30, 20)];
        //: lab.text = [FFFLanguageManager getTextWithKey:@"tips_push"];
        lab.text = [TeamManager sizeKey:StringFromLinguaFrancaData(kStr_replacementData)];
        //: lab.textColor = [UIColor colorWithHexString:@"#2B2F36"];
        lab.textColor = [UIColor isView:StringFromLinguaFrancaData(kStr_fileText)];
        //: lab.font = [UIFont boldSystemFontOfSize:16];
        lab.font = [UIFont boldSystemFontOfSize:16];
        //: [_tipview addSubview:lab];
        [_tipview addSubview:lab];

        //: UITextView *contentTextView = [[UITextView alloc] initWithFrame:CGRectMake(15, lab.bottom+5, [[UIScreen mainScreen] bounds].size.width-30, 130)];
        UITextView *contentTextView = [[UITextView alloc] initWithFrame:CGRectMake(15, lab.bottom+5, [[UIScreen mainScreen] bounds].size.width-30, 130)];
        //: contentTextView.textColor = [UIColor colorWithHexString:@"#8A8E98"];
        contentTextView.textColor = [UIColor isView:StringFromLinguaFrancaData(kStr_tingValue)];
        //: contentTextView.font = [UIFont systemFontOfSize:14.f];
        contentTextView.font = [UIFont systemFontOfSize:14.f];
        //: contentTextView.text = [NSString stringWithFormat:@"%@\n%@\n%@\n%@",[FFFLanguageManager getTextWithKey:@"tips_push_content"],[FFFLanguageManager getTextWithKey:@"tips_push_content_1"],[FFFLanguageManager getTextWithKey:@"tips_push_content_2"],[FFFLanguageManager getTextWithKey:@"tips_push_content_3"]];
        contentTextView.text = [NSString stringWithFormat:StringFromLinguaFrancaData(kStr_screenData),[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_memberValue)],[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_successNameText)],[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_replyKeyMaxData)],[TeamManager sizeKey:StringFromLinguaFrancaData(kStr_colorModelData)]];
        //: [_tipview addSubview:contentTextView];
        [_tipview addSubview:contentTextView];

    }
    //: return _tipview;
    return _tipview;
}

//: @end
@end

Byte * LinguaFrancaDataToCache(Byte *data) {
    int itemMessage = data[0];
    int paddyField = data[1];
    Byte kibbutznik = data[2];
    int chromaticContent = data[3];
    if (!itemMessage) return data + chromaticContent;
    for (int i = chromaticContent; i < chromaticContent + paddyField; i++) {
        int value = data[i] - kibbutznik;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[chromaticContent + paddyField] = 0;
    return data + chromaticContent;
}

NSString *StringFromLinguaFrancaData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)LinguaFrancaDataToCache(data)];
}
